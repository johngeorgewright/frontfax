// Generated by CoffeeScript 1.4.0
var fs, path;

fs = require('fs');

path = require('path');

exports.dir = function(dir, extname, callback) {
  var done, output;
  output = '';
  done = [];
  return fs.readdir(dir, function(err, files) {
    var file, filesToSend, _i, _j, _len, _len1, _results;
    if (err) {
      callback(err);
    }
    filesToSend = [];
    for (_i = 0, _len = files.length; _i < _len; _i++) {
      file = files[_i];
      if (path.extname(file) === extname) {
        filesToSend.push(file);
      }
    }
    if (!(filesToSend.length > 0)) {
      callback();
    }
    _results = [];
    for (_j = 0, _len1 = filesToSend.length; _j < _len1; _j++) {
      file = filesToSend[_j];
      _results.push(fs.readFile("" + dir + "/" + file, function(err, data) {
        if (err) {
          callback(err);
        }
        output += data.toString();
        done.push(file);
        if (done.length === filesToSend.length) {
          return callback(null, output);
        }
      }));
    }
    return _results;
  });
};
